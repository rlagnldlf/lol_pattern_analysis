# 캡스톤 프로젝트3

<p align="center"><img src="https://img.shields.io/badge/python-%233776AB.svg?&style=for-the-badge&logo=python&logoColor=white" /><img src="https://img.shields.io/badge/pytorch-%23EE4C2C.svg?&style=for-the-badge&logo=pytorch&logoColor=white" /><img src="https://img.shields.io/badge/pycharm-%23000000.svg?&style=for-the-badge&logo=pycharm&logoColor=white" /><p>

## 1.개요
### 1-1.문제정의
이번 캡스톤 프로젝트3에서는 롤 아마추어 게이머 30명의 솔로랭크 30개의 데이터를 전처리 과정을
거친뒤 각각 독립변수들을 추출해 독립변수들로 승패를 예측해 어느정도 정확도가 나오는지 알아보고자 한다.

### 1-2.League Of Legends와 솔로 랭크
League Of Legends는 멀티플레이어 온라인 배틀 아레나(MOBA) 장르의 게임으로 2009년 라이엇 게임즈에서 출시해 처음에는 단순한 캐주얼 게임으로 출시 했으나 지속적인 업데이트와 글로벌 e스포츠 리그 LoL 월드 챔피언십(월즈)의 성공으로 세계적인 인기를 얻으며 가장 인기 있는 온라인 게임 중 하나로 자리 잡았다.
솔로랭크는 일반 플레이어들이 실력을 겨뤄 랭크를 올리며 경쟁적인 환경에서 성장하는 모드이다. 이 프로젝트에서는 이 솔로랭크에서 최상위권에 분포되어있는 아마추어 미드라이너 30명의 데이터를 분석할 것이다.
#### LoL 플레이어 통계와 랭크 구조 분석
![combined_lol_images](https://github.com/user-attachments/assets/306f28dd-604f-47bb-ae19-e1a1be9f5bf3)

## 2.데이터
### 2-1.원시데이터
원시데이터는 게임 내 주요 성과 지표를 초반(14분 이전)과 후반(14분 이후)으로 나누어 기록한 정보이다. 플레이어와 관련된 킬, 데스, 어시스트, 골드, 경험치, CS(크립 스코어), 피해량, 아이템 업그레이드 등 다양한 요소를 포함하고 있으며, 특정 순간의 이벤트(드래곤 처치, 포탑 파괴 등)와 관련된 시간 정보도 포함되어 있다.
#### 주요 데이터 요소

| **항목**         | **설명**                           |
|------------------|-----------------------------------|
| `killAt14`       | 14분 이전의 킬 수                   |
| `deathAt14`      | 14분 이전의 데스 수                 |
| `assistAt14`     | 14분 이전의 어시스트 수             |
| `goldAt14`       | 14분 이전 획득한 총 골드            |
| `xpAt14`         | 14분 시점 누적 경험치               |
| `minionsAt14`    | 14분 시점 CS(미니언 처치 수)        |
| `damagetakenAt14`| 14분 이전 받은 총 피해량             |
| `soloAt14`       | 14분 이전 솔로 킬/데스 수             |
| `killAf14`       | 14분 이후의 킬 수                   |
| `deathAf14`      | 14분 이후의 데스 수                    |
| `assistAf14`     | 14분 이후의 어시스트 수               |
| `goldAf14`       | 14분 이후 획득한 총 골드            |
| `damagedoneAf14` | 14분 이후 적 챔피언에게 입힌 피해량  |

#### 2-2.데이터 전처리
매치와 타임라인 데이터를 JSON에서 로드해 Pandas 데이터프레임으로 변환한 후, `matchId`를 기준으로 매치와 타임라인 데이터를 연결하고, 20분 이상 진행된 미드 포지션 게임만 유효 데이터로 필터링했다. 이 과정에서 데이터 누락이나 비정상적인 경기를 예외 처리하여 분석 대상에서 제외했다. 이후 각 게임에서 킬, 데스, 어시스트(KDA), 골드, CS, 경험치, 피해량 등의 주요 지표를 초반(14분 이전)과 후반(14분 이후)으로 나누어 추출하고, 분당 피해량(DPM), 분당 골드(GPM) 등의 파생 지표를 계산했다. 전처리된 데이터는 플레이어와 상대방의 관점으로 나누어 두 개의 JSON 파일로 저장해 추가 분석이 용이하도록 정리했다.
그 후, 플레이어와 상대방 데이터를 통합하여 초반과 후반의 주요 성과 지표 및 두 플레이어 간 차이를 계산한 뒤, 이 데이터를 다시 필터링해 주요 성과 지표(격차 및 비율 데이터)를 추출했다. 마지막으로 데이터를 간단한 테이블 형태로 가공하여 분석과 가독성을 높였으며, 이를 최종 JSON 파일로 저장했다.


![ppt 그림 png](https://github.com/user-attachments/assets/b5cb799c-7100-40b6-a35c-5b6c74cc89ab)


## 3.회귀계수 추출과 승패 예측
### 3-1 선형 회귀를 이용한 독립변수들의 회귀계수 추출
Min-Max 정규화를 통해 데이터를 스케일링한 후, 선형 회귀 모델을 학습하여 회귀 계수를 도출하고, 계수의 절대값을 기준으로 상위 10개의 변수를 추출하였다.

#### 상위 10개 변수

| **독립변수 이름**   | **설명**                         |
|--------------------|---------------------------------|
| `af14xpmdiff`      | 14분 이후 경험치 차이              |
| `af14cspmdiff`     | 14분 이후 분당 CS 차이                 |
| `at14dpm`          | 14분 이전 분당 피해량                  |
| `at14dpmdiff`      | 14분 이전 분당 피해량 차이              |
| `af14gpmdiff`      | 14분 이후 분당 골드 차이               |
| `at14gpmdiff`      | 14분 이전 분당 골드 차이               |
| `at14dpg`          | 14분 이전 데미지/골드 비율             |
| `at14dpgdiff`      | 14분 이전 데미지/골드 비율 차이         |
| `at14gpm`          | 14분 이전 분당 골드                    |
| `af14dpddiff`      | 14분 이후 데미지/데스 비율 차이         |

#### 상위 10개 변수의 회귀 계수 값

![output](https://github.com/user-attachments/assets/63d26f8a-4fe8-40e3-baef-c08cc660b737)

### 3-2 추출된 독립변수들로 승패 예측
추출된 독립변수들을 활용해 승률을 예측하기 위해 선형 회귀 모델을 학습하고, 결과로 회귀 계수와 절편을 도출하였다. 예측값에는 임계값을 적용하여 이진 분류를 수행하였으며, 모델의 성능은 Accuracy와 AUROC를 통해 평가하였다. 이어서 10개의 독립변수를 하나씩 제거하며 모델을 학습하고 평가한 결과, 가장 높은 정확도를 보이는 독립변수 조합을 선정하였다. 최종적으로, **at14gpm**과 **af14dpddiff**를 제외한 8개의 독립변수로 학습한 모델이 Accuracy 0.91, AUROC 0.97로 가장 우수한 성능을 나타냈다.

![accuracy_auroc_adjusted](https://github.com/user-attachments/assets/c318c4eb-5715-4c16-b2c6-d850cbb538fa)

### 3-3 회귀 계수 기반 주요 변수 분석
가장 높은 정확도를 보인 8개의 독립변수 조합에 대한 회귀 계수는 다음과 같다.
| **독립변수 이름**   | **회귀 계수**        |
|--------------------|---------------------------------|
| `af14xpmdiff`      | 0.00213            |
| `af14cspmdiff`     | 0.09222          |
| `at14dpm`          | 0.00008                 |
| `at14dpmdiff`      | 0.00025       |
| `af14gpmdiff`      | 0.00035          |
| `at14gpmdiff`      | 0.00068             |
| `at14dpg`          | 0.05474           |
| `at14dpgdiff`      | 0.12451        |

가장 큰 가중치를 갖는 독립변수는 at14dpgdiff(14분 이전 데미지/골드 비율 차이)와 at14dpg(14분 이전 데미지/골드 비율)로 각각 0.124와 0.054로 가장 높은 회귀 계수를 기록했다. 이는 라인전 초기 제한된 골드량으로 상대에게 더 많은 피해를 입히는 공격적인 플레이 스타일이 승률에 긍정적인 영향을 미친다는 점을 시사한다.

또한, af14xpmdiff(14분 이후 경험치 차이), af14cspmdiff(14분 이후 CS 차이)와 같은 성장 지표 역시 회귀 계수가 유의미하게 나타나, 라인전 이후 지속적인 성장이 승리에 중요한 요소임을 확인할 수 있었다.

이 분석은 초반 라인전의 공격적 플레이와 지속적 성장 관리가 팀의 승리에 결정적인 기여를 한다는 점을 보여준다. 따라서, 게임 내 전략 수립 시 라인전 공격력 극대화와 성장 유지에 중점을 두는 것이 효과적일 것으로 볼 수 있으며, 이 결과를 통해 League OF Lengends 플레이어들이 게임 플레이 스타일을 개선해 향후 승리 확률을 높이는데 도움이 될 수 있을 것이다.
